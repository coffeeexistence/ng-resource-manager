angular.module("ng-resource-manager",[]).constant("MODULE_VERSION","0.0.1"),angular.module("ng-resource-manager",[]).service("ngrm.Cache",[function(){var a=this,b={};a.create=function(c){var d=a.findOrCreateType(c);return{exists:function(b){return a.exists(c,b)?(console.log(c+" "+b+" already exists."),!0):!1},fetch:function(d){return a.exists(c,d)?(console.log(c+" "+d+" - fetched."),b[c][d]):(console.log(c+" "+d+" - not fetched."),!1)},store:function(a,b){console.log(c+" "+b+" - stored."),d[a]=b},merge:function(a){console.log("merge completed"),angular.merge(d,a)}}},a.findOrCreateType=function(c){return a.resourceTypeExists(c)||(b[c]={}),b[c]},a.resourceTypeExists=function(a){return"undefined"!=typeof b[a]},a.exists=function(c,d){return!(!a.resourceTypeExists(c)||"undefined"==typeof b[c][d])}}]),angular.module("ng-resource-manager",[]).service("ngrm.RequestCollector",["$q","$timeout",function(a,b){var c=this;c.create=function(c){var d,e=c.httpBatchRequest,f=c.cache,g=function(){var a={},c=function(b){f.merge(b),console.log(f);var c=function(a){a.resolve(f.fetch(d))};for(var d in b){var e=a[d];e&&e.forEach(c),delete a[d]}},g=function(){d=!1;var b=Object.keys(a);e(b).then(function(b){c(b.data,a)})};return{start:function(){d=this,b(function(){g()},50)},add:function(b,c){a[b]?a[b].push(c):a[b]=[c]}}},h=function(a,b){if(d)d.add(a,b);else{var c=g();c.start(),c.add(a,b)}};return{find:function(b){var c=a.defer();return f.exists(b)?c.resolve(f.fetch(b)):(h(b,c),console.log("adding to queue: "+b)),c.promise}}}}]),angular.module("ng-resource-manager",[]).service("ResourceManager",["ngrm.Cache","ngrm.RequestCollector",function(a,b){var c=this;c.create=function(c){var d=a.create(c.name),e=b.create({httpBatchRequest:c.httpBatchRequest,cache:d});return{find:e.find}}}]);